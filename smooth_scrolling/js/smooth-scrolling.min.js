!function(){"use strict";let e=!1;({isTouchDevice(){let e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,t=navigator.userAgent.toLowerCase(),s=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t),o=window.innerWidth<=1024;return e||s||e&&o},init(){e=!this.isTouchDevice(),console.log(`Smooth scrolling ${e?"enabled":"disabled"} for ${this.isTouchDevice()?"touch":"desktop"} device`)}}).init();let t={lerp:e?.12:1,smoothWheel:e,syncTouch:!1,touchMultiplier:0,wheelMultiplier:1,infinite:!1},s={popup:".t-popup_show",candidates:[".t-form__inputsbox",".t-slds__items-wrapper",".t-gallery__item-wrapper",".t-popup__content",".t-popup__td-content",".t-popup__container",'.t-rec[data-record-type="604"] .t604__maincontainer'],anchors:'a[href^="#"]',wrappers:'.t396__elem[data-elem-type="button"]',triggers:['a[href^="#popup"]','a[href^="#order"]',"div[data-tooltip-hook]",".js-gallery-zoom-trigger",'.t-submit[href^="#"]','[data-popup-hook*="#popup"]']},o=new class o{constructor(){this.lenis=null,this.popups=new Map,this.stoppedByPopup=!1,this.rafId=null,this.observer=null,this.destroyed=!1,this.init()}init(){this.lenis=new Lenis(t),this.startRAF(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}startRAF(){let e=t=>{this.destroyed||(this.lenis?.raf(t),this.popups.forEach(e=>e?.raf(t)),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}setup(){this.reconcilePopups(),setTimeout(()=>this.reconcilePopups(),500),this.setupEvents(),this.setupObserver()}setupEvents(){document.body.addEventListener("click",e=>{this.handleAnchor(e),this.handlePopupTrigger(e)},!0)}handleAnchor(e){let t=this.findAnchor(e.target);if(!t)return;let s=t.getAttribute("href");s&&("#"===s?(e.preventDefault(),this.lenis?.scrollTo(0),window.location.hash=""):s.startsWith("#")&&s.length>1&&this.scrollToAnchor(e,s))}findAnchor(e){let t=e.closest(s.anchors);if(t)return t;let o=e.closest(s.wrappers);return o?.querySelector(s.anchors)}scrollToAnchor(e,t){e.preventDefault();let s=t.substring(1),o=document.querySelector(t)||document.querySelector(`a[name="${s}"]`);if(!o){let r=document.querySelector(`[data-tooltip-hook*="${t}"]`)||document.querySelector(`#rec${s}`)||document.querySelector(`.t-popup[data-tooltip-hook*="${s}"]`);if(r)return}o&&(this.lenis?.scrollTo(o),window.location.hash=t)}handlePopupTrigger(e){let t=e.target.closest(s.triggers.join(", "));t&&setTimeout(()=>this.reconcilePopups(),250)}setupObserver(){this.observer=new MutationObserver(()=>this.reconcilePopups()),this.observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}reconcilePopups(){this.destroyed||(this.cleanupPopups(),this.createPopups(),this.manageGlobal())}cleanupPopups(){this.popups.forEach((e,t)=>{let s=t.closest(".t-popup");document.body.contains(t)&&s?.classList.contains("t-popup_show")||(e?.destroy(),this.popups.delete(t))})}createPopups(){document.querySelectorAll(s.popup).forEach(s=>{if(this.hasPopup(s))return;let o=this.findScrollable(s);if(o){let r={...t,lerp:e?.12:1,smoothWheel:e},i=new Lenis({wrapper:o,content:o,...r});this.popups.set(o,i)}})}findScrollable(e){for(let t of s.candidates){let o=e.querySelector(t);if(o&&this.isScrollable(o))return o;if(o){for(let r of o.children)if(this.isScrollable(r))return r}}return this.isScrollable(e)?e:null}isScrollable(e){if(!e)return!1;let t=getComputedStyle(e);return["scroll","auto"].some(e=>t.overflowY===e||t.overflowX===e)}hasPopup(e){return Array.from(this.popups.keys()).some(t=>t===e||e.contains(t))}updatePopups(){this.popups.forEach(t=>{t?.options&&(t.options.lerp=e?.12:1,t.options.smoothWheel=e)})}manageGlobal(){let e=this.popups.size>0;e&&!this.stoppedByPopup?(this.lenis?.stop(),this.stoppedByPopup=!0):!e&&this.stoppedByPopup&&(this.lenis?.start(),this.stoppedByPopup=!1)}destroy(){this.destroyed=!0,this.rafId&&cancelAnimationFrame(this.rafId),this.lenis?.destroy(),this.popups.forEach(e=>e?.destroy()),this.observer?.disconnect()}};window.TildaController={destroy:()=>o?.destroy(),getInstance:()=>o},window.addEventListener("beforeunload",()=>o?.destroy())}();