!function(){"use strict";let t=!0,e="mouse",s="mouse",o={lerp:.08,smoothWheel:!0,syncTouch:!1,touchMultiplier:0,infinite:!1},r={popup:".t-popup_show",candidates:[".t-form__inputsbox",".t-slds__items-wrapper",".t-gallery__item-wrapper",".t-popup__content",".t-popup__td-content",".t-popup__container",'.t-rec[data-record-type="604"] .t604__maincontainer'],anchors:'a[href^="#"]',wrappers:'.t396__elem[data-elem-type="button"]',triggers:['a[href^="#popup"]','a[href^="#order"]',"div[data-tooltip-hook]",".js-gallery-zoom-trigger",'.t-submit[href^="#"]','[data-popup-hook*="#popup"]']};({detect(t){let o="unknown";if("wheel"===t.type){let{deltaX:r,deltaY:i}=t,p=Math.abs(i),l=Math.abs(r);s=o=p>50||0===l&&p>20?"mouse":l>2?"trackpad":p<15&&0===t.deltaMode?"trackpad":p>30?"mouse":"trackpad"}else t.type.startsWith("pointer")?s=o="mouse"===t.pointerType?"mouse":"touch":t.type.startsWith("touch")&&(s=o="touch");"unknown"!==o&&o!==e&&(e=o,this.update(o))},update(e){let s="mouse"===e;if(s===t)return;t=s;let o=window.TildaController?.getInstance();o&&(!o.stoppedByPopup&&o.lenis&&(s?(o.lenis.options.lerp=.08,o.lenis.options.smoothWheel=!0):(o.lenis.options.lerp=1,o.lenis.options.smoothWheel=!1)),o.updatePopups())},init(){document.addEventListener("wheel",t=>this.detect(t),{passive:!0}),document.addEventListener("pointerdown",t=>this.detect(t),{passive:!0}),document.addEventListener("touchstart",t=>this.detect(t),{passive:!0})}}).init();let i=new class e{constructor(){this.lenis=null,this.popups=new Map,this.stoppedByPopup=!1,this.rafId=null,this.observer=null,this.destroyed=!1,this.init()}init(){this.lenis=new Lenis(o),this.startRAF(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}startRAF(){let t=e=>{this.destroyed||(this.lenis?.raf(e),this.popups.forEach(t=>t?.raf(e)),this.rafId=requestAnimationFrame(t))};this.rafId=requestAnimationFrame(t)}setup(){this.reconcilePopups(),setTimeout(()=>this.reconcilePopups(),500),this.setupEvents(),this.setupObserver()}setupEvents(){document.body.addEventListener("click",t=>{this.handleAnchor(t),this.handlePopupTrigger(t)},!0)}handleAnchor(t){let e=this.findAnchor(t.target);if(!e)return;let s=e.getAttribute("href");s&&("#"===s?(t.preventDefault(),this.lenis?.scrollTo(0),window.location.hash=""):s.startsWith("#")&&s.length>1&&this.scrollToAnchor(t,s))}findAnchor(t){let e=t.closest(r.anchors);if(e)return e;let s=t.closest(r.wrappers);return s?.querySelector(r.anchors)}scrollToAnchor(t,e){t.preventDefault();let s=e.substring(1),o=document.querySelector(e)||document.querySelector(`a[name="${s}"]`);if(!o){let r=document.querySelector(`[data-tooltip-hook*="${e}"]`)||document.querySelector(`#rec${s}`)||document.querySelector(`.t-popup[data-tooltip-hook*="${s}"]`);if(r)return}o&&(this.lenis?.scrollTo(o),window.location.hash=e)}handlePopupTrigger(t){let e=t.target.closest(r.triggers.join(", "));e&&setTimeout(()=>this.reconcilePopups(),250)}setupObserver(){this.observer=new MutationObserver(()=>this.reconcilePopups()),this.observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}reconcilePopups(){this.destroyed||(this.cleanupPopups(),this.createPopups(),this.manageGlobal())}cleanupPopups(){this.popups.forEach((t,e)=>{let s=e.closest(".t-popup");document.body.contains(e)&&s?.classList.contains("t-popup_show")||(t?.destroy(),this.popups.delete(e))})}createPopups(){document.querySelectorAll(r.popup).forEach(e=>{if(this.hasPopup(e))return;let s=this.findScrollable(e);if(s){let r={...o,lerp:t?.08:1,smoothWheel:t},i=new Lenis({wrapper:s,content:s,...r});this.popups.set(s,i)}})}findScrollable(t){for(let e of r.candidates){let s=t.querySelector(e);if(s&&this.isScrollable(s))return s;if(s){for(let o of s.children)if(this.isScrollable(o))return o}}return this.isScrollable(t)?t:null}isScrollable(t){if(!t)return!1;let e=getComputedStyle(t);return["scroll","auto"].some(t=>e.overflowY===t||e.overflowX===t)}hasPopup(t){return Array.from(this.popups.keys()).some(e=>e===t||t.contains(e))}updatePopups(){this.popups.forEach(e=>{e?.options&&(e.options.lerp=t?.08:1,e.options.smoothWheel=t)})}manageGlobal(){let t=this.popups.size>0;t&&!this.stoppedByPopup?(this.lenis?.stop(),this.stoppedByPopup=!0):!t&&this.stoppedByPopup&&(this.lenis?.start(),this.stoppedByPopup=!1)}destroy(){this.destroyed=!0,this.rafId&&cancelAnimationFrame(this.rafId),this.lenis?.destroy(),this.popups.forEach(t=>t?.destroy()),this.observer?.disconnect()}};window.TildaController={destroy:()=>i?.destroy(),getInstance:()=>i},window.addEventListener("beforeunload",()=>i?.destroy())}();