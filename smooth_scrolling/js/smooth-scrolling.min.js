!function(){"use strict";let t=!1;({isTouchDevice(){let t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,e=navigator.userAgent.toLowerCase(),s=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),o=window.innerWidth<=1024;return t||s||t&&o},init(){t=!this.isTouchDevice(),console.log(`Smooth scrolling ${t?"enabled":"disabled"} for ${this.isTouchDevice()?"touch":"desktop"} device`)}}).init();let e={lerp:t?.12:1,smoothWheel:t,syncTouch:!1,touchMultiplier:0,wheelMultiplier:1,infinite:!1},s={popup:".t-popup_show",candidates:[".t-form__inputsbox",".t-slds__items-wrapper",".t-gallery__item-wrapper",".t-popup__content",".t-popup__td-content",".t-popup__container",'.t-rec[data-record-type="604"] .t604__maincontainer'],anchors:'a[href^="#"]',wrappers:'.t396__elem[data-elem-type="button"]',triggers:['a[href^="#popup"]','a[href^="#order"]',"div[data-tooltip-hook]",".js-gallery-zoom-trigger",'.t-submit[href^="#"]','[data-popup-hook*="#popup"]']},o=new class o{constructor(){this.lenis=null,this.popups=new Map,this.stoppedByPopup=!1,this.rafId=null,this.observer=null,this.destroyed=!1,this.init()}init(){this.lenis=new Lenis(e),this.startRAF(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}startRAF(){let t=e=>{this.destroyed||(this.lenis?.raf(e),this.popups.forEach(t=>t?.raf(e)),this.rafId=requestAnimationFrame(t))};this.rafId=requestAnimationFrame(t)}setup(){this.reconcilePopups(),setTimeout(()=>this.reconcilePopups(),500),this.setupEvents(),this.setupObserver()}setupEvents(){document.body.addEventListener("click",t=>{this.handleAnchor(t),this.handlePopupTrigger(t)},{capture:!0}),document.body.addEventListener("mousedown",t=>{let e=this.findAnchor(t.target);if(e){let s=e.getAttribute("href");s&&s.startsWith("#")&&t.preventDefault()}},{capture:!0})}handleAnchor(t){let e=this.findAnchor(t.target);if(!e)return;let s=e.getAttribute("href");s&&(s.startsWith("#")&&(t.preventDefault(),t.stopPropagation()),"#"===s?(this.lenis?.scrollTo(0),setTimeout(()=>{""!==window.location.hash&&history.replaceState(null,null,window.location.pathname+window.location.search)},100)):s.startsWith("#")&&s.length>1&&this.scrollToAnchor(s))}findAnchor(t){let e=t.closest(s.anchors);if(e)return e;let o=t.closest(s.wrappers);return o?.querySelector(s.anchors)}scrollToAnchor(e){let s=e.substring(1),o=document.querySelector(e)||document.querySelector(`a[name="${s}"]`);if(!o){let r=document.querySelector(`[data-tooltip-hook*="${e}"]`)||document.querySelector(`#rec${s}`)||document.querySelector(`.t-popup[data-tooltip-hook*="${s}"]`);if(r)return}o&&this.lenis&&(this.stoppedByPopup&&this.lenis.start(),this.lenis.scrollTo(o,{offset:0,duration:t?1.2:0,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),onComplete:()=>{window.location.hash!==e&&history.replaceState(null,null,window.location.pathname+window.location.search+e),this.stoppedByPopup&&this.popups.size>0&&this.lenis.stop()}}))}handlePopupTrigger(t){let e=t.target.closest(s.triggers.join(", "));e&&setTimeout(()=>this.reconcilePopups(),250)}setupObserver(){this.observer=new MutationObserver(()=>this.reconcilePopups()),this.observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}reconcilePopups(){this.destroyed||(this.cleanupPopups(),this.createPopups(),this.manageGlobal())}cleanupPopups(){this.popups.forEach((t,e)=>{let s=e.closest(".t-popup");document.body.contains(e)&&s?.classList.contains("t-popup_show")||(t?.destroy(),this.popups.delete(e))})}createPopups(){document.querySelectorAll(s.popup).forEach(t=>{if(this.hasPopup(t))return;let s=this.findScrollable(t);if(s){let o=new Lenis({wrapper:s,content:s,...e});this.popups.set(s,o)}})}findScrollable(t){for(let e of s.candidates){let o=t.querySelector(e);if(o&&this.isScrollable(o))return o;if(o){for(let r of o.children)if(this.isScrollable(r))return r}}return this.isScrollable(t)?t:null}isScrollable(t){if(!t)return!1;let e=getComputedStyle(t);return["scroll","auto"].some(t=>e.overflowY===t||e.overflowX===t)}hasPopup(t){return Array.from(this.popups.keys()).some(e=>e===t||t.contains(e))}manageGlobal(){let t=this.popups.size>0;t&&!this.stoppedByPopup?(this.lenis?.stop(),this.stoppedByPopup=!0):!t&&this.stoppedByPopup&&(this.lenis?.start(),this.stoppedByPopup=!1)}destroy(){this.destroyed=!0,this.rafId&&cancelAnimationFrame(this.rafId),this.lenis?.destroy(),this.popups.forEach(t=>t?.destroy()),this.observer?.disconnect()}};window.TildaController={destroy:()=>o?.destroy(),getInstance:()=>o},window.addEventListener("beforeunload",()=>o?.destroy())}();